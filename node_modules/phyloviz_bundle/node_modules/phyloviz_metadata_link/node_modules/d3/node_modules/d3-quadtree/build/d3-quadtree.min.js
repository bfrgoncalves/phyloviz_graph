!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define("d3-quadtree",["exports"],t):t(n.d3_quadtree={})}(this,function(n){"use strict";function t(n){return n[0]}function e(n){return n[1]}function u(n){return function(){return n}}function r(){this.x=null,this.y=null,this.leaf=!0,this.data=null,this.nodes=[]}function i(n,t,e,u,r,a){if(!n(t,e,u,r,a)){var f=(e+r)/2,l=(u+a)/2,o=t.nodes;o[0]&&i(n,o[0],e,u,f,l),o[1]&&i(n,o[1],f,u,r,l),o[2]&&i(n,o[2],e,l,f,a),o[3]&&i(n,o[3],f,l,r,a)}}function a(n,t,e,u,r,i,a){var f,l=1/0;return function o(n,s,c,d,h){if(!(s>i||c>a||u>d||r>h)){if(null!=n.x){var v=t-n.x,x=e-n.y,y=v*v+x*x;if(l>y){var p=Math.sqrt(l=y);u=t-p,r=e-p,i=t+p,a=e+p,f=n}}for(var g=n.nodes,b=(s+d)/2,m=(c+h)/2,q=t>=b,N=e>=m,k=N<<1|q,w=k+4;w>k;++k)if(n=g[3&k])switch(3&k){case 0:o(n,s,c,b,m);break;case 1:o(n,b,c,d,m);break;case 2:o(n,s,m,b,h);break;case 3:o(n,b,m,d,h)}}}(n,u,r,i,a),f&&f.data}function f(){function n(n){function t(n,t,u,r,i,a,f,l){if(!isNaN(u)&&!isNaN(r))if(n.leaf){var o=n.x,s=n.y;if(null!=o)if(Math.abs(o-u)+Math.abs(s-r)<.01)e(n,t,u,r,i,a,f,l);else{var c=n.data;n.x=n.y=n.data=null,e(n,c,o,s,i,a,f,l),e(n,t,u,r,i,a,f,l)}else n.x=u,n.y=r,n.data=t}else e(n,t,u,r,i,a,f,l)}function e(n,e,u,i,a,f,l,o){var s=(a+l)/2,c=(f+o)/2,d=u>=s,h=i>=c,v=h<<1|d;n.leaf=!1,n=n.nodes[v]||(n.nodes[v]=new r),d?a=s:l=s,h?f=c:o=c,t(n,e,u,i,a,f,l,o)}var h,v,x,y,p,g,b,m,q,N="function"==typeof c?c:u(c),k="function"==typeof d?d:u(d);if(n||(n=[]),null!=f)g=f,b=o,m=l,q=s;else for(m=q=-(g=b=1/0),v=[],x=[],p=n.length,y=0;p>y;++y){var w=+N(h=n[y],y,n),M=+k(h,y,n);g>w&&(g=w),b>M&&(b=M),w>m&&(m=w),M>q&&(q=M),v.push(w),x.push(M)}var F=m-g,j=q-b;isFinite(F)&&isFinite(j)&&(F>j?q=b+F:m=g+j);var z=new r;if(z.add=function(n){return t(z,n,+N(n,++y),+k(n,y),g,b,m,q),z},z.visit=function(n){return i(n,z,g,b,m,q),z},z.find=function(n,t){return a(z,n,t,g,b,m,q)},y=-1,null==f){for(;++y<p;)t(z,n[y],v[y],x[y],g,b,m,q);--y}else n.forEach(z.add);return v=x=n=h=null,z}var f,l,o,s,c=t,d=e;return n.x=function(t){return arguments.length?(c=t,n):c},n.y=function(t){return arguments.length?(d=t,n):d},n.extent=function(t){return arguments.length?(null==t?f=o=l=s=null:(f=+t[0][0],o=+t[0][1],l=+t[1][0],s=+t[1][1]),n):null==f?null:[[f,o],[l,s]]},n.size=function(t){return arguments.length?(null==t?f=o=l=s=null:(f=o=0,l=+t[0],s=+t[1]),n):null==f?null:[l-f,s-o]},n}var l="0.2.0";n.version=l,n.quadtree=f});